(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{6801:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/run",function(){return r(5677)}])},6458:function(e,t,r){"use strict";var s=r(1527);let n=e=>{let{heading:t,children:r}=e;return(0,s.jsxs)("div",{className:"m-4",children:[(0,s.jsx)("div",{className:"form-card-heading",children:(0,s.jsx)("p",{className:"rounded-r-lg bg-primary p-2 text-white md:text-xl",children:t})}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center rounded-xl border-2 border-dotted border-primary px-4 py-6 ",children:r})]})};t.Z=n},8630:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var s=r(1527),n=r(8257),a=r(9671),i=r(959);let l=e=>{let{id:t}=e;return(0,s.jsxs)("div",{className:"m-2 rounded-xl border-2 p-2",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-3xl",children:"person"}),t]})};var c=r(4341);let d=e=>{let{id:t}=e,{attributes:r,listeners:n,setNodeRef:i,transform:d,transition:x}=(0,a.nB)({id:t});return(0,s.jsx)("div",{ref:i,style:{transform:c.ux.Transform.toString(d),transition:x},...r,...n,children:(0,s.jsx)(l,{id:t})})},x=e=>{let{id:t,items:r,label:i}=e,{setNodeRef:l}=(0,n.Zj)({id:t});return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-center text-xl font-bold",children:i}),(0,s.jsx)(a.Fo,{id:t,items:r,strategy:a.U2,children:(0,s.jsx)("div",{ref:l,className:"mt-2 w-full rounded-md border-2 border-primary p-5",children:r.map(e=>(0,s.jsx)(d,{id:e},e))})})]})},o=e=>{let{leaderDragData:t,setLeaderDragData:r,nOfGroup:c}=e,[d,o]=(0,i.useState)(c);(0,i.useEffect)(()=>{o(c-t.leader.length)},[c,t]);let[m,h]=(0,i.useState)(),u=(0,n.Dy)((0,n.VT)(n.we),(0,n.VT)(n.Lg,{coordinateGetter:a.is})),f=e=>e in t?e:Object.keys(t).find(r=>t[r].includes(e.toString())),p=e=>{let{active:t}=e,r=t.id.toString();h(r)},j=e=>{let{active:s,over:n}=e,a=s.id.toString(),i=null==n?void 0:n.id;if(!i)return;let l=f(a),c=f(null==n?void 0:n.id);l&&c&&l!==c&&r(e=>{let r;let d=e[l],x=e[c],o=d.indexOf(a),m=x.indexOf(i.toString());if(i in e)r=x.length+1;else{let h=n&&m===x.length-1;r=m>=0?m+(h?1:0):x.length+1}return{...e,[l]:[...e[l].filter(e=>e!==s.id)],[c]:[...e[c].slice(0,r),t[l][o],...e[c].slice(r,e[c].length)]}})},g=e=>{let{active:s,over:n}=e,i=s.id.toString(),l=null==n?void 0:n.id;if(!l)return;let c=f(i),d=f(null==n?void 0:n.id);if(!c||!d||c!==d)return;let x=t[c].indexOf(i),o=t[d].indexOf(l.toString());x!==o&&r(e=>({...e,[d]:(0,a.Rp)(e[d],x,o)})),h(void 0)};return(0,s.jsx)("div",{className:"flex w-full flex-wrap",children:(0,s.jsxs)(n.LB,{sensors:u,collisionDetection:n.ey,onDragStart:p,onDragOver:j,onDragEnd:g,children:[(0,s.jsxs)("div",{className:"w-1/2",children:[(0,s.jsxs)("p",{className:"text-center",children:[t.general.length,"人"]}),(0,s.jsx)(x,{id:"general",items:t.general,label:"一般参加者"})]}),(0,s.jsxs)("div",{className:"w-1/2",children:[d>0?(0,s.jsxs)("p",{className:"text-center text-tertiary",children:["あと",d,"人追加してください!"]}):0==d?(0,s.jsx)("p",{className:"text-center text-secondary",children:"ありがとうございました！"}):(0,s.jsxs)("p",{className:"text-center text-tertiary",children:["あと",-1*d,"人除外してください!"]}),(0,s.jsx)(x,{id:"leader",label:"班のリーダー",items:t.leader})]}),(0,s.jsx)(n.y9,{children:m?(0,s.jsx)(l,{id:m}):null})]})})};var m=o},4734:function(e,t,r){"use strict";var s=r(1527);let n=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("p",{className:"my-4 text-2xl",children:"計算中..."}),(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)("span",{className:"animation-delay-250 ml-2 h-8 w-8 animate-spin rounded-xl bg-primary"}),(0,s.jsx)("span",{className:"animation-delay-500 ml-2 h-8 w-8 animate-spin rounded-xl bg-primary"}),(0,s.jsx)("span",{className:"animation-delay-750 ml-2 h-8 w-8 animate-spin rounded-xl bg-primary"})]})]});t.Z=n},6432:function(e,t,r){"use strict";var s=r(1527);r(3205);let n=e=>{let{resultGrouping:t,runCalculationAgain:r,readers:n}=e;return(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm text-tertiary",children:"大域最適解をできる限り求めていますが、重複が生じる場合もございます"})}),t.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"result-element-heading",children:(0,s.jsxs)("p",{className:"rounded-lg bg-black p-2 text-2xl text-white md:text-3xl",children:[t+1,"回目"]})}),(0,s.jsx)("div",{className:"flex flex-col flex-wrap items-center justify-center rounded-xl border-2 border-dotted border-black px-4 py-6 ",children:e.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"result-element-heading",children:(0,s.jsxs)("p",{className:"rounded-lg bg-primary p-2 text-white md:text-xl",children:["グループ",t+1]})}),(0,s.jsx)("div",{className:"flex flex-col flex-wrap items-center justify-center rounded-xl border-2 border-dotted border-primary px-4 py-6 md:flex-row ",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-3xl "+(n.includes(e)?"text-primary":""),children:"person"}),(0,s.jsx)("h3",{className:"px-4 pb-2 text-2xl md:text-xl "+(n.includes(e)?"text-primary":""),children:e})]},t))})]},t))})]},t)),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("button",{className:"m-4 rounded-xl border-2 border-primary px-4 py-2 duration-500 hover:bg-primary hover:text-white",onClick:r,children:"再計算する"})})]})};t.Z=n},4912:function(e,t,r){"use strict";var s=r(1527);let n=e=>{let{heading:t}=e;return(0,s.jsxs)("div",{className:"my-8 flex items-center justify-center",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"relative mr-8 h-12 w-12 rounded-xl bg-primary",children:(0,s.jsx)("div",{className:"absolute -top-4 -right-4 h-8 w-8 rounded-md bg-secondary"})})}),(0,s.jsx)("h1",{className:"pb-2 text-4xl drop-shadow md:text-4xl",children:t})]})};t.Z=n},5786:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var s=r(1527),n=r(5377),a=r.n(n),i=r(3458),l=r.n(i),c=r(3517),d=r.n(c);let x=()=>(0,s.jsx)("footer",{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mt-6 flex flex-wrap justify-around",children:[(0,s.jsx)(d(),{href:"/",className:"mx-4",children:(0,s.jsx)("p",{className:"text-primary",children:"トップ"})}),(0,s.jsx)(d(),{href:"/run",className:"mx-4",children:(0,s.jsx)("p",{className:"text-primary",children:"実行"})}),(0,s.jsx)(d(),{href:"/description",className:"mx-4",children:(0,s.jsx)("p",{className:"text-primary",children:"仕組み"})}),(0,s.jsx)(d(),{href:"/aboutThisSite",className:"mx-4",children:(0,s.jsx)("p",{className:"text-primary",children:"このサイトについて"})})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col justify-around",children:[(0,s.jsx)("p",{className:"m-2 text-center",children:"copyright usuyuki"}),(0,s.jsx)("a",{className:"m-2 text-center text-sm",href:"https://github.com/usuyuki/rawp",target:"_blank",rel:"noreferrer noopener",children:"GitHub"})]})]})});var o=r(3930),m=r.n(o);let h=()=>(0,s.jsx)("header",{className:"sticky top-0 z-10 ",children:(0,s.jsx)("div",{className:"flex flex-wrap justify-around",children:(0,s.jsxs)(d(),{href:"/",className:"mx-2 flex items-center justify-center",children:[(0,s.jsx)(m(),{src:"/img/icon/rawpLogoLight.svg",width:40,height:40,alt:"RAWPロゴ",className:"mr-2"}),(0,s.jsx)("p",{className:"text-2xl text-primary ",children:"RAWP"})]})})}),u=()=>(0,s.jsx)("div",{className:"side-share-element",children:(0,s.jsxs)("div",{className:"hidden flex-col items-center justify-center md:flex",children:[(0,s.jsx)("p",{children:"share"}),(0,s.jsx)("div",{className:"h-16 w-1 bg-black"}),(0,s.jsx)("a",{href:"http://twitter.com/share?url=rawp.usuyuki.net&text=複数回のグループ分けをいい感じにするツール「RAWP」&related=@usuyuki26",target:"_blank",rel:"noreferrer noopener",children:(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black",children:(0,s.jsx)(m(),{src:"/img/icon/TwitterLogoWhite.svg",alt:"Twitter",width:"0",height:"0",sizes:"100%",className:"h-auto w-1/2"})})}),(0,s.jsx)("a",{href:"https://www.facebook.com/share.php?u=http://rawp.usuyuki.net",target:"_blank",rel:"noreferrer noopener",children:(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-black",children:(0,s.jsx)(m(),{src:"/img/icon/f_logo_RGB-White_250.png",alt:"Twitter",width:"0",height:"0",sizes:"100%",className:"h-auto w-1/2"})})})]})}),f=e=>{let{children:t,title:r,description:n}=e,i=r?"".concat(r," | RAWP"):"RAWP",c=null!=n?n:"RAWPは重複のない複数回グループ分けを素早く導き出すサービスです";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("meta",{httpEquiv:"content-language",content:"ja"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,s.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"ie=edge"}),(0,s.jsx)("meta",{name:"description",content:c}),(0,s.jsx)("title",{children:i}),(0,s.jsx)("meta",{property:"og:title",content:i}),(0,s.jsx)("meta",{property:"og:description",content:c}),(0,s.jsx)("meta",{property:"og:type",content:"website"}),(0,s.jsx)("meta",{property:"og:url",content:"https://rawp.usuyuki.net/"}),(0,s.jsx)("meta",{property:"og:image",content:"https://rawp.usuyuki.net/img/ogp/ogp.png"}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,s.jsx)("meta",{name:"twitter:site",content:"@usuyuki26"}),(0,s.jsx)("meta",{name:"twitter:creator",content:"@usuyuki26"}),(0,s.jsx)("link",{rel:"apple-touch-icon",type:"image/png",href:"/img/favicon/apple-touch-icon-180x180.png"}),(0,s.jsx)("link",{rel:"icon",type:"image/png",href:"/img/favicon/icon-192x192.png"})]}),(0,s.jsx)(l(),{src:"https://www.googletagmanager.com/gtag/js?id=G-J7JHJXHKX3",strategy:"afterInteractive"}),(0,s.jsx)(l(),{id:"google-analytics",strategy:"afterInteractive",children:"\n                        window.dataLayer = window.dataLayer || [];\n                        function gtag(){window.dataLayer.push(arguments);}\n                        gtag('js', new Date());\n\n                        gtag('config', 'G-J7JHJXHKX3');\n                    "}),(0,s.jsx)("div",{className:"fixed inset-y-0 right-4 ",children:(0,s.jsx)(u,{})}),(0,s.jsx)(h,{}),(0,s.jsx)("main",{children:t}),(0,s.jsx)(x,{})]})};var p=f},9528:function(e,t,r){"use strict";r.d(t,{m:function(){return s}});let s=e=>{let t=new Set(e);return t.size!==e.length}},8554:function(e,t,r){"use strict";r.a(e,async function(e,s){try{r.d(t,{Z:function(){return i}});var n=r(7590),a=e([n]);n=(a.then?(await a)():a)[0];let i=(e,t,r,s,a,i,l)=>{let c=e,d=t;if(i){a?(d+=1,c=Math.ceil(e/d)*d):c=Math.ceil(e/t)*t;for(let x=0;x<c-e;x++)s.push("")}let o=new Date,m=(0,n.X)(c,d,r,BigInt(o.getTime())),h=m.split(","),u=[],f=0,p=c/d;for(let j=0;j<r;j++){let g=[];for(let y=0;y<d;y++)g.push(h.slice(f,f+=p));u.push(g)}return u.forEach((e,t)=>{e.forEach((e,r)=>{e.forEach((e,n)=>{u[t][r][n]=s[Number(e)]}),i&&(u[t][r]=u[t][r].filter(e=>""!==e))})}),l.length>0&&u.forEach((e,t)=>{e.forEach((e,r)=>{u[t][r].unshift(l[r])})}),u};s()}catch(l){s(l)}})},5677:function(e,t,r){"use strict";r.a(e,async function(e,s){try{r.r(t);var n=r(1527),a=r(959),i=r(6458),l=r(8630),c=r(4734),d=r(6432),x=r(4912),o=r(5786),m=r(9528),h=r(8554),u=e([h]);h=(u.then?(await u)():u)[0];let f=()=>{let[e,t]=(0,a.useState)(""),[r,s]=(0,a.useState)([]),[u,f]=(0,a.useState)(1),[p,j]=(0,a.useState)(1),[g,y]=(0,a.useState)(1),[w,N]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[k,_]=(0,a.useState)(1),[S,E]=(0,a.useState)("waiting"),[Z,D]=(0,a.useState)("複数回のグループ生成"),[T,C]=(0,a.useState)([]),[O,A]=(0,a.useState)(!1),[L,X]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[W,G]=(0,a.useState)({general:[],leader:[]}),J=e=>{t(e.target.value),f(e.target.value.split(/\r\n|\n/).length),s(e.target.value.split(/\r\n|\n/).filter(e=>""!==e))},B=e=>{v(e.target.checked)},H=e=>{R(e.target.checked)};(0,a.useEffect)(()=>{j(r.length),G({general:r,leader:[]}),p>2&&g>1||R(!1),(0,m.m)(r)&&A(!1)},[r,g,p]),(0,a.useEffect)(()=>{g>p&&y(p),N(p%g!=0)},[p,g]),(0,a.useEffect)(()=>{p>0&&p<=255&&g>0&&g<p&&k>0&&k<=255&&!(0,m.m)(r)?P?W.leader.length===(b&&w?g+1:g)?A(!0):A(!1):A(!0):A(!1)},[r,g,p,k,P,W,b,w]),(0,a.useEffect)(()=>{switch(S){case"waiting":D("複数回のグループ生成");break;case"calculating":D("計算中");break;case"finished":D("演算結果")}},[S]),(0,a.useEffect)(()=>{"calculating"===S&&(X(!0),D("計算中"))},[S]),(0,a.useEffect)(()=>{L&&"計算中"===Z&&(C((0,h.Z)(W.general.length,g,k,W.general,b,w,W.leader)),E("finished"),X(!1),window.scrollTo(0,0))},[L,b,w,g,p,k,r,Z,P,W]);let I=()=>{E("calculating"),window.scrollTo(0,0)},M=()=>{E("waiting"),C([])},z=(0,n.jsx)(n.Fragment,{});switch(S){case"waiting":z=(0,n.jsxs)("div",{className:"counter-element",children:[(0,n.jsxs)(i.Z,{heading:"参加者の名前",children:[(0,n.jsx)("p",{className:"mb-2",children:"参加者名をお一人ずつ改行しながら入力してください"}),(0,n.jsx)("textarea",{onChange:J,rows:u,defaultValue:e,className:"overflow-hidden"}),(0,n.jsxs)("div",{children:[p,"人"]}),(0,n.jsx)("p",{className:"text-primary",children:"特定の人物を固定したい場合は、すべて入力後「4.オプション」より選択できます"}),p>255?(0,n.jsx)("p",{className:"text-tertiary",children:"最大人数を超えています！"}):"",(0,m.m)(r)?(0,n.jsx)("p",{className:"text-tertiary",children:"同じ名前の人は設定できません！"}):""]}),(0,n.jsxs)(i.Z,{heading:"作成したいグループ数",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("p",{className:"mx-2 text-6xl ",children:g}),b&&w?(0,n.jsx)("p",{className:"text-3xl text-tertiary",children:"+1"}):"",(0,n.jsx)("p",{className:"text-2xl",children:"グループ"})]}),(0,n.jsxs)("p",{children:["(1グループあたり約",0===p||0==g?"-":b&&w?Math.floor(p/(g+1)):Math.floor(p/g),"人程度)"]}),(0,n.jsxs)("div",{className:"flex justify-center",children:[(0,n.jsx)("button",{className:"mx-4 my-2 flex h-12 w-12 items-center justify-center rounded-full bg-primary pb-1 text-2xl text-white",onClick:()=>{p>g&&y(g+1)},children:"+"}),(0,n.jsx)("button",{className:"mx-4 my-2 flex h-12 w-12 items-center justify-center rounded-full bg-primary pb-1 text-2xl text-white",onClick:()=>{g>1&&y(g-1)},children:"-"})]}),(0,n.jsx)("p",{className:"mt-6",children:"人数に過不足がある時の挙動"}),(0,n.jsxs)("label",{className:"mt-4 inline-flex cursor-pointer flex-col items-center md:flex-row",children:[(0,n.jsx)("input",{type:"checkbox",onChange:B,className:"peer sr-only",checked:b}),(0,n.jsx)("span",{className:"ml-3 border p-2 text-sm text-primary peer-checked:border-dotted peer-checked:text-black",children:"グループ数は変えずに1グループあたりの人数を増やす"}),(0,n.jsx)("span",{className:"mt-2 ml-3 border border-dotted p-2 text-sm peer-checked:border-solid peer-checked:text-primary md:mt-0",children:"少ない人数で構成されたグループを追加する"})]}),(0,n.jsx)("p",{className:"mt-6 text-xs md:w-1/2",children:"グループ数に対して人数の過不足がある場合の調整も自動で行いますが、実装上グループの人数が安定しないため、できる限り過不足ない人数調整をおすすめします"})]}),(0,n.jsxs)(i.Z,{heading:"グループ分けする回数",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("p",{className:"mx-2 text-6xl ",children:k}),(0,n.jsx)("p",{className:"text-2xl",children:"回"})]}),(0,n.jsxs)("div",{className:"flex justify-center",children:[(0,n.jsx)("button",{className:"mx-4 my-2 flex h-12 w-12 items-center justify-center rounded-full bg-primary pb-1 text-2xl text-white",onClick:()=>{_(k+1)},children:"+"}),(0,n.jsx)("button",{className:"mx-4 my-2 flex h-12 w-12 items-center justify-center rounded-full bg-primary pb-1 text-2xl text-white",onClick:()=>{k>1&&_(k-1)},children:"-"})]})]}),(0,n.jsx)(i.Z,{heading:"オプション",children:p>2&&g>1?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("label",{className:"",children:[(0,n.jsx)("input",{type:"checkbox",onChange:H,className:"peer sr-only",checked:P}),(0,n.jsx)("p",{className:"cursor-pointer rounded-xl p-2 text-center peer-checked:bg-primary peer-checked:text-white",children:"グループのリーダーを設定する"})]}),P?(0,n.jsx)(l.Z,{leaderDragData:W,setLeaderDragData:G,nOfGroup:b&&w?g+1:g}):""]}):(0,n.jsx)("p",{className:"text-center",children:"オプションは人数やグループの設定内容に応じて表示されます"})}),(0,n.jsxs)("div",{className:"my-6 flex flex-col items-center justify-center",children:[O?(0,n.jsx)("p",{className:"text-primary",children:"バリデーションOK、実行できます\uD83E\uDD73"}):(0,n.jsx)("p",{className:"text-tertiary",children:"指定の入力を終えると実行できます。"}),(0,n.jsx)("button",{onClick:I,className:"rounded-md bg-tertiary py-6 px-12 text-3xl text-white duration-300 hover:bg-primary hover:text-tertiary",disabled:!O,children:"演算開始"})]})]});break;case"calculating":z=(0,n.jsx)(c.Z,{});break;case"finished":z=(0,n.jsx)(d.Z,{resultGrouping:T,readers:W.leader,runCalculationAgain:M})}return(0,n.jsxs)(o.Z,{title:Z,children:[(0,n.jsx)(x.Z,{heading:Z}),z]})};t.default=f,s()}catch(p){s(p)}})},7590:function(e,t,r){"use strict";r.a(e,async function(e,s){try{r.d(t,{X:function(){return a.X}});var n=r(7963),a=r(9643),i=e([n,a]);[n,a]=i.then?(await i)():i,s()}catch(l){s(l)}})},9643:function(e,t,r){"use strict";r.a(e,async function(s,n){try{r.d(t,{O:function(){return u},X:function(){return h}});var a=r(7963);e=r.hmd(e);var i=s([a]);a=(i.then?(await i)():i)[0];let l="undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder,c=new l("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let d=new Uint8Array;function x(e,t){return c.decode((0===d.byteLength&&(d=new Uint8Array(a.memory.buffer)),d).subarray(e,e+t))}let o=new Int32Array;function m(){return 0===o.byteLength&&(o=new Int32Array(a.memory.buffer)),o}function h(e,t,r,s){try{let n=a.__wbindgen_add_to_stack_pointer(-16);a.resolve_by_sa(n,e,t,r,s);var i=m()[n/4+0],l=m()[n/4+1];return x(i,l)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(i,l)}}function u(e,t){throw Error(x(e,t))}n()}catch(f){n(f)}})},7963:function(e,t,r){"use strict";r.a(e,async function(s,n){try{var a=r(9643),i=s([a]),[a]=i.then?(await i)():i;await r.v(t,e.id,"a3ed1f6210c9344f",{"./rawp_kernel_bg.js":{__wbindgen_throw:a.O}}),n()}catch(l){n(l)}},1)}},function(e){e.O(0,[647,995,774,888,179],function(){return e(e.s=6801)}),_N_E=e.O()}]);